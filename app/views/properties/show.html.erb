<%= turbo_frame_tag :modal_content do %>    
    <!-- Modal content -->
      <div id="modal-content" class="modal-content-wrapper bg-white rounded-lg w-full max-w-lg shadow-2xl overflow-y-auto" style="max-height: 90vh;">
        <div class="p-6">
          <div class="text-center mb-6">
            <% address_parts = @property.address.split(',') %>
            <h1 class="text-3xl font-bold mb-2"><%= address_parts.first.strip %></h1>
            <% if address_parts.size > 1 %>
              <%= suburb_pill(address_parts[1]) %>
            <% end %>
          </div>

        <hr class="mb-6"> <!-- Horizontal line for separation -->

         <div class="image-container carousel">
          <!-- Debug information -->
          <div class="debug-info" style="background-color: #f0f0f0; padding: 10px; margin-bottom: 10px;">
            <p>Images provided: <%= @property.image_urls&.count || 'Not set' %></p>
            <p>Images attached: <%= @property.images.attached? %></p>
            <p>Images count: <%= @property.images.count %></p>
            <p>Download job ID: <%= @property.download_job_id %></p>
            <p>Expected image count: <%= @property.expected_image_count || 'Not set' %></p>
            <p>Images downloading?: <%= @property.images_downloading? %></p>
            <p>Images partially downloaded?: <%= @property.images_partially_downloaded? %></p>
          </div>

          <% if @property.images.attached? %>
            <div class="carousel-inner">
              <% @property.images.each_with_index do |image, index| %>
                <%= image_tag image, class: "property-image #{index == 0 ? '' : 'hidden'}", data: { index: index } %>
              <% end %>
              <% if @property.images.count > 1 %>
                <div class="carousel-controls">
                  <button class="carousel-button prev">&lt;</button>
                  <button class="carousel-button next">&gt;</button>
                </div>
              <% end %>
            </div>
          <% elsif @property.images_downloading? %>
            <div class="downloading-message">
              <p>Images are currently downloading. Please check back soon.</p>
              <div class="loading-indicator">
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
              </div>
            </div>
          <% elsif @property.images_partially_downloaded? %>
            <div class="carousel-inner">
              <% @property.images.each_with_index do |image, index| %>
                <%= image_tag image, class: "property-image #{index == 0 ? '' : 'hidden'}", data: { index: index } %>
              <% end %>
              <% if @property.images.count > 1 %>
                <div class="carousel-controls">
                  <button class="carousel-button prev">&lt;</button>
                  <button class="carousel-button next">&gt;</button>
                </div>
              <% end %>
            </div>
            <p class="partial-download-message">Some images are still downloading. Check back later for the complete set.</p>
          <% else %>
            <div class="no-images-message">
              <p>No images are available for this property.</p>
            </div>
          <% end %>
        </div>

        <hr class="my-4"> <!-- Horizontal line -->

        <!-- Other property details -->
        <div class="space-y-2"> <!-- Added this wrapper div with vertical spacing -->
          <p><strong>Sale Price:</strong> <%= format_price(@property.sale_price) %></p>
          <p><strong>Sold Date:</strong> <%= @property.sold_date %></p>
          <p><strong>Bedrooms:</strong> <%= @property.bedroom_count %></p>
          <p><strong>Bathrooms:</strong> <%= @property.bathroom_count %></p>
          <p><strong>Land Area:</strong> <%= format_area(@property.land_area) %></p>
          <p><strong>Floor Area:</strong> <%= format_area(@property.floor_area) %></p>
          <p><strong>Deck:</strong> <%= @property.deck %></p>
          <p><strong>Property Contour:</strong> <%= @property.property_contour %></p>
          <p><strong>View Type:</strong> <%= @property.view_type %></p>
          <p><strong>Decade Built:</strong> <%= @property.decade_built %></p>
          <p><strong>Condition:</strong> <%= @property.condition %></p>
        </div>

          <div class="mt-6">
            <%= link_to 'Back to List', properties_path, class: "bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded", data: { turbo_frame: "_top" } %>
          </div>
        </div>
<% end %>